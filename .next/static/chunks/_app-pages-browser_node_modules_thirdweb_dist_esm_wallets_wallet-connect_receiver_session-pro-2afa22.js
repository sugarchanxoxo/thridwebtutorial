"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_thirdweb_dist_esm_wallets_wallet-connect_receiver_session-pro-2afa22"],{

/***/ "(app-pages-browser)/./node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/session-proposal.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/session-proposal.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   acceptSessionProposal: () => (/* binding */ acceptSessionProposal),\n/* harmony export */   disconnectExistingSessions: () => (/* binding */ disconnectExistingSessions),\n/* harmony export */   onSessionProposal: () => (/* binding */ onSessionProposal)\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.js */ \"(app-pages-browser)/./node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/index.js\");\n/* harmony import */ var _session_store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./session-store.js */ \"(app-pages-browser)/./node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/session-store.js\");\n\n\n/**\n * @internal\n */\nasync function onSessionProposal(options) {\n    const { wallet, walletConnectClient, event, chains, onConnect } = options;\n    const account = wallet.getAccount();\n    if (!account) {\n        throw new Error(\"No account connected to provided wallet\");\n    }\n    const origin = event.verifyContext?.verified?.origin;\n    if (origin) {\n        await disconnectExistingSessions({ origin, walletConnectClient });\n    }\n    const session = await acceptSessionProposal({\n        account,\n        walletConnectClient,\n        sessionProposal: event,\n        chains,\n    });\n    await (0,_session_store_js__WEBPACK_IMPORTED_MODULE_0__.saveSession)(session);\n    wallet.subscribe(\"disconnect\", () => {\n        (0,_index_js__WEBPACK_IMPORTED_MODULE_1__.disconnectWalletConnectSession)({ session, walletConnectClient });\n    });\n    onConnect?.(session);\n}\n/**\n * @internal\n */\nasync function disconnectExistingSessions({ walletConnectClient, origin, }) {\n    const sessions = await (0,_session_store_js__WEBPACK_IMPORTED_MODULE_0__.getSessions)();\n    for (const session of sessions) {\n        if (session.origin === origin) {\n            await (0,_index_js__WEBPACK_IMPORTED_MODULE_1__.disconnectWalletConnectSession)({ session, walletConnectClient });\n        }\n    }\n}\n/**\n * @internal\n */\nasync function acceptSessionProposal({ account, walletConnectClient, sessionProposal, chains, }) {\n    if (!sessionProposal.params.requiredNamespaces?.eip155 &&\n        !sessionProposal.params.optionalNamespaces?.eip155) {\n        throw new Error(\"No EIP155 namespace found in Wallet Connect session proposal\");\n    }\n    const namespaces = {\n        chains: [\n            ...Array.from(new Set([\n                ...(sessionProposal.params.requiredNamespaces?.eip155?.chains?.map((chain) => `${chain}:${account.address}`) ?? []),\n                ...(sessionProposal.params.optionalNamespaces?.eip155?.chains?.map((chain) => `${chain}:${account.address}`) ?? []),\n                ...(chains?.map((chain) => `eip155:${chain.id}:${account.address}`) ??\n                    []),\n            ])),\n        ],\n        methods: [\n            ...(sessionProposal.params.requiredNamespaces?.eip155?.methods ?? []),\n            ...(sessionProposal.params.optionalNamespaces?.eip155?.methods ?? []),\n        ],\n        events: [\n            ...(sessionProposal.params.requiredNamespaces?.eip155?.events ?? []),\n            ...(sessionProposal.params.optionalNamespaces?.eip155?.events ?? []),\n        ],\n    };\n    const approval = await walletConnectClient.approve({\n        id: sessionProposal.id,\n        namespaces: {\n            eip155: {\n                accounts: namespaces.chains,\n                methods: namespaces.methods,\n                events: namespaces.events,\n            },\n        },\n    });\n    const session = await approval.acknowledged();\n    return {\n        topic: session.topic,\n        origin: sessionProposal.verifyContext?.verified?.origin || \"Unknown origin\",\n    };\n}\n//# sourceMappingURL=session-proposal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy90aGlyZHdlYi9kaXN0L2VzbS93YWxsZXRzL3dhbGxldC1jb25uZWN0L3JlY2VpdmVyL3Nlc3Npb24tcHJvcG9zYWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBNEQ7QUFDRTtBQUM5RDtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksd0RBQXdEO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyw2QkFBNkI7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFVBQVUsOERBQVc7QUFDckI7QUFDQSxRQUFRLHlFQUE4QixHQUFHLDhCQUE4QjtBQUN2RSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLDRDQUE0Qyw4QkFBOEI7QUFDakYsMkJBQTJCLDhEQUFXO0FBQ3RDO0FBQ0E7QUFDQSxrQkFBa0IseUVBQThCLEdBQUcsOEJBQThCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLHVDQUF1Qyx3REFBd0Q7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpR0FBaUcsTUFBTSxHQUFHLGdCQUFnQjtBQUMxSCxpR0FBaUcsTUFBTSxHQUFHLGdCQUFnQjtBQUMxSCxxREFBcUQsU0FBUyxHQUFHLGdCQUFnQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWlpbmFkb2kvRGVza3RvcC9naXRodWJQcm9qZWN0L3Rocmlkd2VidHV0b3JpYWwvbm9kZV9tb2R1bGVzL3RoaXJkd2ViL2Rpc3QvZXNtL3dhbGxldHMvd2FsbGV0LWNvbm5lY3QvcmVjZWl2ZXIvc2Vzc2lvbi1wcm9wb3NhbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkaXNjb25uZWN0V2FsbGV0Q29ubmVjdFNlc3Npb24gfSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbnMsIHNhdmVTZXNzaW9uIH0gZnJvbSBcIi4vc2Vzc2lvbi1zdG9yZS5qc1wiO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG9uU2Vzc2lvblByb3Bvc2FsKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IHdhbGxldCwgd2FsbGV0Q29ubmVjdENsaWVudCwgZXZlbnQsIGNoYWlucywgb25Db25uZWN0IH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGFjY291bnQgPSB3YWxsZXQuZ2V0QWNjb3VudCgpO1xuICAgIGlmICghYWNjb3VudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBhY2NvdW50IGNvbm5lY3RlZCB0byBwcm92aWRlZCB3YWxsZXRcIik7XG4gICAgfVxuICAgIGNvbnN0IG9yaWdpbiA9IGV2ZW50LnZlcmlmeUNvbnRleHQ/LnZlcmlmaWVkPy5vcmlnaW47XG4gICAgaWYgKG9yaWdpbikge1xuICAgICAgICBhd2FpdCBkaXNjb25uZWN0RXhpc3RpbmdTZXNzaW9ucyh7IG9yaWdpbiwgd2FsbGV0Q29ubmVjdENsaWVudCB9KTtcbiAgICB9XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGFjY2VwdFNlc3Npb25Qcm9wb3NhbCh7XG4gICAgICAgIGFjY291bnQsXG4gICAgICAgIHdhbGxldENvbm5lY3RDbGllbnQsXG4gICAgICAgIHNlc3Npb25Qcm9wb3NhbDogZXZlbnQsXG4gICAgICAgIGNoYWlucyxcbiAgICB9KTtcbiAgICBhd2FpdCBzYXZlU2Vzc2lvbihzZXNzaW9uKTtcbiAgICB3YWxsZXQuc3Vic2NyaWJlKFwiZGlzY29ubmVjdFwiLCAoKSA9PiB7XG4gICAgICAgIGRpc2Nvbm5lY3RXYWxsZXRDb25uZWN0U2Vzc2lvbih7IHNlc3Npb24sIHdhbGxldENvbm5lY3RDbGllbnQgfSk7XG4gICAgfSk7XG4gICAgb25Db25uZWN0Py4oc2Vzc2lvbik7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGlzY29ubmVjdEV4aXN0aW5nU2Vzc2lvbnMoeyB3YWxsZXRDb25uZWN0Q2xpZW50LCBvcmlnaW4sIH0pIHtcbiAgICBjb25zdCBzZXNzaW9ucyA9IGF3YWl0IGdldFNlc3Npb25zKCk7XG4gICAgZm9yIChjb25zdCBzZXNzaW9uIG9mIHNlc3Npb25zKSB7XG4gICAgICAgIGlmIChzZXNzaW9uLm9yaWdpbiA9PT0gb3JpZ2luKSB7XG4gICAgICAgICAgICBhd2FpdCBkaXNjb25uZWN0V2FsbGV0Q29ubmVjdFNlc3Npb24oeyBzZXNzaW9uLCB3YWxsZXRDb25uZWN0Q2xpZW50IH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFjY2VwdFNlc3Npb25Qcm9wb3NhbCh7IGFjY291bnQsIHdhbGxldENvbm5lY3RDbGllbnQsIHNlc3Npb25Qcm9wb3NhbCwgY2hhaW5zLCB9KSB7XG4gICAgaWYgKCFzZXNzaW9uUHJvcG9zYWwucGFyYW1zLnJlcXVpcmVkTmFtZXNwYWNlcz8uZWlwMTU1ICYmXG4gICAgICAgICFzZXNzaW9uUHJvcG9zYWwucGFyYW1zLm9wdGlvbmFsTmFtZXNwYWNlcz8uZWlwMTU1KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIEVJUDE1NSBuYW1lc3BhY2UgZm91bmQgaW4gV2FsbGV0IENvbm5lY3Qgc2Vzc2lvbiBwcm9wb3NhbFwiKTtcbiAgICB9XG4gICAgY29uc3QgbmFtZXNwYWNlcyA9IHtcbiAgICAgICAgY2hhaW5zOiBbXG4gICAgICAgICAgICAuLi5BcnJheS5mcm9tKG5ldyBTZXQoW1xuICAgICAgICAgICAgICAgIC4uLihzZXNzaW9uUHJvcG9zYWwucGFyYW1zLnJlcXVpcmVkTmFtZXNwYWNlcz8uZWlwMTU1Py5jaGFpbnM/Lm1hcCgoY2hhaW4pID0+IGAke2NoYWlufToke2FjY291bnQuYWRkcmVzc31gKSA/PyBbXSksXG4gICAgICAgICAgICAgICAgLi4uKHNlc3Npb25Qcm9wb3NhbC5wYXJhbXMub3B0aW9uYWxOYW1lc3BhY2VzPy5laXAxNTU/LmNoYWlucz8ubWFwKChjaGFpbikgPT4gYCR7Y2hhaW59OiR7YWNjb3VudC5hZGRyZXNzfWApID8/IFtdKSxcbiAgICAgICAgICAgICAgICAuLi4oY2hhaW5zPy5tYXAoKGNoYWluKSA9PiBgZWlwMTU1OiR7Y2hhaW4uaWR9OiR7YWNjb3VudC5hZGRyZXNzfWApID8/XG4gICAgICAgICAgICAgICAgICAgIFtdKSxcbiAgICAgICAgICAgIF0pKSxcbiAgICAgICAgXSxcbiAgICAgICAgbWV0aG9kczogW1xuICAgICAgICAgICAgLi4uKHNlc3Npb25Qcm9wb3NhbC5wYXJhbXMucmVxdWlyZWROYW1lc3BhY2VzPy5laXAxNTU/Lm1ldGhvZHMgPz8gW10pLFxuICAgICAgICAgICAgLi4uKHNlc3Npb25Qcm9wb3NhbC5wYXJhbXMub3B0aW9uYWxOYW1lc3BhY2VzPy5laXAxNTU/Lm1ldGhvZHMgPz8gW10pLFxuICAgICAgICBdLFxuICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgIC4uLihzZXNzaW9uUHJvcG9zYWwucGFyYW1zLnJlcXVpcmVkTmFtZXNwYWNlcz8uZWlwMTU1Py5ldmVudHMgPz8gW10pLFxuICAgICAgICAgICAgLi4uKHNlc3Npb25Qcm9wb3NhbC5wYXJhbXMub3B0aW9uYWxOYW1lc3BhY2VzPy5laXAxNTU/LmV2ZW50cyA/PyBbXSksXG4gICAgICAgIF0sXG4gICAgfTtcbiAgICBjb25zdCBhcHByb3ZhbCA9IGF3YWl0IHdhbGxldENvbm5lY3RDbGllbnQuYXBwcm92ZSh7XG4gICAgICAgIGlkOiBzZXNzaW9uUHJvcG9zYWwuaWQsXG4gICAgICAgIG5hbWVzcGFjZXM6IHtcbiAgICAgICAgICAgIGVpcDE1NToge1xuICAgICAgICAgICAgICAgIGFjY291bnRzOiBuYW1lc3BhY2VzLmNoYWlucyxcbiAgICAgICAgICAgICAgICBtZXRob2RzOiBuYW1lc3BhY2VzLm1ldGhvZHMsXG4gICAgICAgICAgICAgICAgZXZlbnRzOiBuYW1lc3BhY2VzLmV2ZW50cyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGFwcHJvdmFsLmFja25vd2xlZGdlZCgpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHRvcGljOiBzZXNzaW9uLnRvcGljLFxuICAgICAgICBvcmlnaW46IHNlc3Npb25Qcm9wb3NhbC52ZXJpZnlDb250ZXh0Py52ZXJpZmllZD8ub3JpZ2luIHx8IFwiVW5rbm93biBvcmlnaW5cIixcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2Vzc2lvbi1wcm9wb3NhbC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/thirdweb/dist/esm/wallets/wallet-connect/receiver/session-proposal.js\n"));

/***/ })

}]);